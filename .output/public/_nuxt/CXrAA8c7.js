function K(m){return m&&m.__esModule&&Object.prototype.hasOwnProperty.call(m,"default")?m.default:m}var d={exports:{}},Q=d.exports,M;function X(){return M||(M=1,(function(m,ne){(function(A,y){m.exports=y()})(Q,function(){function A(e,n){var t=void 0;return function(){t&&clearTimeout(t),t=setTimeout(e,n)}}function y(e,n){for(var t=e.length,r=t,s=[];t--;)s.push(n(e[r-t-1]));return s}function E(e,n){var t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(window.Promise)return S(e,n,t);e.recalculate(!0,!0)}function C(e){for(var n=e.options,t=e.responsiveOptions,r=e.keys,s=e.docWidth,o=void 0,i=0;i<r.length;i++){var a=parseInt(r[i],10);s>=a&&(o=n.breakAt[a],b(o,t))}return t}function x(e){for(var n=e.options,t=e.responsiveOptions,r=e.keys,s=e.docWidth,o=void 0,i=r.length-1;i>=0;i--){var a=parseInt(r[i],10);s<=a&&(o=n.breakAt[a],b(o,t))}return t}function I(e){var n=e.useContainerForBreakpoints?e.container.clientWidth:window.innerWidth,t={columns:e.columns};l(e.margin)?t.margin={x:e.margin.x,y:e.margin.y}:t.margin={x:e.margin,y:e.margin};var r=Object.keys(e.breakAt);return e.mobileFirst?C({options:e,responsiveOptions:t,keys:r,docWidth:n}):x({options:e,responsiveOptions:t,keys:r,docWidth:n})}function p(e){return I(e).columns}function h(e){return I(e).margin}function _(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],t=p(e),r=h(e).x,s=100/t;if(!n)return s;if(t===1)return"100%";var o="px";if(typeof r=="string"){var i=parseFloat(r);o=r.replace(i,""),r=i}return r=(t-1)*r/t,o==="%"?s-r+"%":"calc("+s+"% - "+r+o+")"}function R(e,n){var t=p(e.options),r=0,s=void 0,o=void 0;if(++n===1)return 0;o=h(e.options).x;var i="px";if(typeof o=="string"){var a=parseFloat(o,10);i=o.replace(a,""),o=a}return s=(o-(t-1)*o/t)*(n-1),r+=_(e.options,!1)*(n-1),i==="%"?r+s+"%":"calc("+r+"% + "+s+i+")"}function N(e){var n=0,t=e.container,r=e.rows;g(r,function(s){n=s>n?s:n}),t.style.height=n+"px"}function V(e,n){var t=arguments.length>2&&arguments[2]!==void 0&&arguments[2],r=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],s=p(e.options),o=h(e.options).y;O(e,s,t),g(n,function(i){var a=0,f=parseInt(i.offsetHeight,10);isNaN(f)||(e.rows.forEach(function(U,J){U<e.rows[a]&&(a=J)}),i.style.position="absolute",i.style.top=e.rows[a]+"px",i.style.left=""+e.cols[a],e.rows[a]+=isNaN(f)?0:f+o,r&&(i.dataset.macyComplete=1))}),r&&(e.tmpRows=null),N(e)}function q(e,n){var t=arguments.length>2&&arguments[2]!==void 0&&arguments[2],r=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],s=p(e.options),o=h(e.options).y;O(e,s,t),g(n,function(i){e.lastcol===s&&(e.lastcol=0);var a=$(i,"height");a=parseInt(i.offsetHeight,10),isNaN(a)||(i.style.position="absolute",i.style.top=e.rows[e.lastcol]+"px",i.style.left=""+e.cols[e.lastcol],e.rows[e.lastcol]+=isNaN(a)?0:a+o,e.lastcol+=1,r&&(i.dataset.macyComplete=1))}),r&&(e.tmpRows=null),N(e)}var c=function e(n,t){if(!(this instanceof e))return new e(n,t);if(n&&n.nodeName)return n;if(n=n.replace(/^\s*/,"").replace(/\s*$/,""),t)return this.byCss(n,t);for(var r in this.selectors)if(t=r.split("/"),new RegExp(t[1],t[2]).test(n))return this.selectors[r](n);return this.byCss(n)};c.prototype.byCss=function(e,n){return(n||document).querySelectorAll(e)},c.prototype.selectors={},c.prototype.selectors[/^\.[\w\-]+$/]=function(e){return document.getElementsByClassName(e.substring(1))},c.prototype.selectors[/^\w+$/]=function(e){return document.getElementsByTagName(e)},c.prototype.selectors[/^\#[\w\-]+$/]=function(e){return document.getElementById(e.substring(1))};var g=function(e,n){for(var t=e.length,r=t;t--;)n(e[r-t-1])},v=function(){var e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.running=!1,this.events=[],this.add(e)};v.prototype.run=function(){if(!this.running&&this.events.length>0){var e=this.events.shift();this.running=!0,e(),this.running=!1,this.run()}},v.prototype.add=function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return!!n&&(Array.isArray(n)?g(n,function(t){return e.add(t)}):(this.events.push(n),void this.run()))},v.prototype.clear=function(){this.events=[]};var k=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.instance=e,this.data=n,this},w=function(){var e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.events={},this.instance=e};w.prototype.on=function(){var e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return!(!e||!n)&&(Array.isArray(this.events[e])||(this.events[e]=[]),this.events[e].push(n))},w.prototype.emit=function(){var e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e||!Array.isArray(this.events[e]))return!1;var t=new k(this.instance,n);g(this.events[e],function(r){return r(t)})};var T=function(e){return!("naturalHeight"in e&&e.naturalHeight+e.naturalWidth===0)||e.width+e.height!==0},P=function(e,n){var t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return new Promise(function(r,s){if(n.complete)return T(n)?r(n):s(n);n.addEventListener("load",function(){return T(n)?r(n):s(n)}),n.addEventListener("error",function(){return s(n)})}).then(function(r){t&&e.emit(e.constants.EVENT_IMAGE_LOAD,{img:r})}).catch(function(r){return e.emit(e.constants.EVENT_IMAGE_ERROR,{img:r})})},D=function(e,n){var t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return y(n,function(r){return P(e,r,t)})},S=function(e,n){var t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return Promise.all(D(e,n,t)).then(function(){e.emit(e.constants.EVENT_IMAGE_COMPLETE)})},j=function(e){return A(function(){e.emit(e.constants.EVENT_RESIZE),e.queue.add(function(){return e.recalculate(!0,!0)})},100)},z=function(e){if(e.container=c(e.options.container),e.container instanceof c||!e.container)return!!e.options.debug&&console.error("Error: Container not found");e.container.length&&(e.container=e.container[0]),e.options.container=e.container,e.container.style.position="relative"},G=function(e){e.queue=new v,e.events=new w(e),e.rows=[],e.resizer=j(e)},F=function(e){var n=c("img",e.container);window.addEventListener("resize",e.resizer),e.on(e.constants.EVENT_IMAGE_LOAD,function(){return e.recalculate(!1,!1)}),e.on(e.constants.EVENT_IMAGE_COMPLETE,function(){return e.recalculate(!0,!0)}),e.options.useOwnImageLoader||E(e,n,!e.options.waitForImages),e.emit(e.constants.EVENT_INITIALIZED)},W=function(e){z(e),G(e),F(e)},l=function(e){return e===Object(e)&&Object.prototype.toString.call(e)!=="[object Array]"},b=function(e,n){l(e)||(n.columns=e),l(e)&&e.columns&&(n.columns=e.columns),l(e)&&e.margin&&!l(e.margin)&&(n.margin={x:e.margin,y:e.margin}),l(e)&&e.margin&&l(e.margin)&&e.margin.x&&(n.margin.x=e.margin.x),l(e)&&e.margin&&l(e.margin)&&e.margin.y&&(n.margin.y=e.margin.y)},$=function(e,n){return window.getComputedStyle(e,null).getPropertyValue(n)},O=function(e,n){var t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(e.lastcol||(e.lastcol=0),e.rows.length<1&&(t=!0),t){e.rows=[],e.cols=[],e.lastcol=0;for(var r=n-1;r>=0;r--)e.rows[r]=0,e.cols[r]=R(e,r)}else if(e.tmpRows){e.rows=[];for(var r=n-1;r>=0;r--)e.rows[r]=e.tmpRows[r]}else{e.tmpRows=[];for(var r=n-1;r>=0;r--)e.tmpRows[r]=e.rows[r]}},B=function(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1],t=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],r=n?e.container.children:c(':scope > *:not([data-macy-complete="1"])',e.container);r=Array.from(r).filter(function(o){return o.offsetParent!==null});var s=_(e.options);return g(r,function(o){n&&(o.dataset.macyComplete=0),o.style.width=s}),e.options.trueOrder?(q(e,r,n,t),e.emit(e.constants.EVENT_RECALCULATED)):(V(e,r,n,t),e.emit(e.constants.EVENT_RECALCULATED))},Z=function(){return!!window.Promise},H=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};Array.from||(Array.from=function(e){for(var n=0,t=[];n<e.length;)t.push(e[n++]);return t});var L={columns:4,margin:2,trueOrder:!1,waitForImages:!1,useImageLoader:!0,breakAt:{},useOwnImageLoader:!1,onInit:!1,cancelLegacy:!1,useContainerForBreakpoints:!1};(function(){try{document.createElement("a").querySelector(":scope *")}catch{(function(){function n(o){return function(i){if(i&&t.test(i)){var a=this.getAttribute("id");a||(this.id="q"+Math.floor(9e6*Math.random())+1e6),arguments[0]=i.replace(t,"#"+this.id);var f=o.apply(this,arguments);return a===null?this.removeAttribute("id"):a||(this.id=a),f}return o.apply(this,arguments)}}var t=/:scope\b/gi,r=n(Element.prototype.querySelector);Element.prototype.querySelector=function(o){return r.apply(this,arguments)};var s=n(Element.prototype.querySelectorAll);Element.prototype.querySelectorAll=function(o){return s.apply(this,arguments)}})()}})();var u=function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:L;if(!(this instanceof e))return new e(n);this.options={},H(this.options,L,n),this.options.cancelLegacy&&!Z()||W(this)};return u.init=function(e){return console.warn("Depreciated: Macy.init will be removed in v3.0.0 opt to use Macy directly like so Macy({ /*options here*/ }) "),new u(e)},u.prototype.recalculateOnImageLoad=function(){var e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return E(this,c("img",this.container),!e)},u.prototype.runOnImageLoad=function(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1],t=c("img",this.container);return this.on(this.constants.EVENT_IMAGE_COMPLETE,e),n&&this.on(this.constants.EVENT_IMAGE_LOAD,e),E(this,t,n)},u.prototype.recalculate=function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return t&&this.queue.clear(),this.queue.add(function(){return B(e,n,t)})},u.prototype.remove=function(){window.removeEventListener("resize",this.resizer),g(this.container.children,function(e){e.removeAttribute("data-macy-complete"),e.removeAttribute("style")}),this.container.removeAttribute("style")},u.prototype.reInit=function(){this.recalculate(!0,!0),this.emit(this.constants.EVENT_INITIALIZED),window.addEventListener("resize",this.resizer),this.container.style.position="relative"},u.prototype.on=function(e,n){this.events.on(e,n)},u.prototype.emit=function(e,n){this.events.emit(e,n)},u.constants={EVENT_INITIALIZED:"macy.initialized",EVENT_RECALCULATED:"macy.recalculated",EVENT_IMAGE_LOAD:"macy.image.load",EVENT_IMAGE_ERROR:"macy.image.error",EVENT_IMAGE_COMPLETE:"macy.images.complete",EVENT_RESIZE:"macy.resize"},u.prototype.constants=u.constants,u})})(d)),d.exports}var Y=X();const ee=K(Y),te=Object.freeze(Object.defineProperty({__proto__:null,default:ee},Symbol.toStringTag,{value:"Module"}));export{te as m};
